<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

        canvas {
            border: 1px solid #000;
        }

        h2 {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        button {
            display: none;
            position: absolute;
            top: 60%;
            left: 50%;
            transform: translateX(-50%);
            padding: 10px;
            cursor: pointer;
        }

        #score {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 18px;
        }
    </style>
    <title>Simple Game</title>
</head>
<body>
    <canvas id="gameCanvas" width="500" height="500"></canvas>
    <h2 id="gameOverText">Game Over</h2>
    <h2 id="youWinText">You Win!</h2>
    <button id="restartButton">Restart</button>
    <div id="score">Score: 0</div>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        const heroSize = 20;
        const enemySize = 20;
        const coinSize = 15;
        let heroX = canvas.width / 2 - heroSize / 2;
        let heroY = canvas.height / 2 - heroSize / 2;
        let enemies = [];
        let coins = [];
        let winSquare = createRandomSquare();
        let score = 0;
        let gameOverText = document.getElementById('gameOverText');
        let youWinText = document.getElementById('youWinText');
        let restartButton = document.getElementById('restartButton');
        let scoreElement = document.getElementById('score');

        function createRandomSquare() {
            const x = Math.random() * (canvas.width - enemySize);
            const y = Math.random() * (canvas.height - enemySize);
            return { x, y };
        }

        function createRandomCoin() {
            const x = Math.random() * (canvas.width - coinSize);
            const y = Math.random() * (canvas.height - coinSize);
            return { x, y };
        }

        function drawHero() {
            ctx.fillStyle = 'blue';
            ctx.fillRect(heroX, heroY, heroSize, heroSize);
        }

        function drawEnemy(enemy) {
            ctx.fillStyle = 'red';
            ctx.fillRect(enemy.x, enemy.y, enemySize, enemySize);
        }

        function drawCoin(coin) {
            ctx.fillStyle = 'yellow';
            ctx.fillRect(coin.x, coin.y, coinSize, coinSize);
        }

        function drawWinSquare() {
            ctx.fillStyle = 'red';
            ctx.fillRect(winSquare.x, winSquare.y, enemySize, enemySize);
        }

        function drawScore() {
            ctx.fillStyle = '#000';
            ctx.font = '18px Arial';
            ctx.fillText('Score: ' + score, canvas.width - 80, 20);
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            drawHero();
            drawWinSquare();
            drawScore();

            enemies.forEach(enemy => {
                drawEnemy(enemy);
            });

            coins.forEach(coin => {
                drawCoin(coin);
            });
        }

        function checkCollision() {
            for (let i = coins.length - 1; i >= 0; i--) {
                const coin = coins[i];
                if (
                    heroX < coin.x + coinSize &&
                    heroX + heroSize > coin.x &&
                    heroY < coin.y + coinSize &&
                    heroY + heroSize > coin.y
                ) {
                    coins.splice(i, 1);
                    score += 10;
                }
            }

            for (const enemy of enemies) {
                if (
                    heroX < enemy.x + enemySize &&
                    heroX + heroSize > enemy.x &&
                    heroY < enemy.y + enemySize &&
                    heroY + heroSize > enemy.y
                ) {
                    gameOver();
                }
            }

            if (
                heroX < winSquare.x + enemySize &&
                heroX + heroSize > winSquare.x &&
                heroY < winSquare.y + enemySize &&
                heroY + heroSize > winSquare.y
            ) {
                youWin();
            }
        }

        function gameOver() {
            gameOverText.style.display = 'block';
            restartButton.style.display = 'block';
            canvas.style.display = 'none';
        }

        function youWin() {
            youWinText.style.display = 'block';
            restartButton.style.display = 'block';
            canvas.style.display = 'none';
        }

        function restartGame() {
            gameOverText.style.display = 'none';
            youWinText.style.display = 'none';
            restartButton.style.display = 'none';
            canvas.style.display = 'block';

            heroX = canvas.width / 2 - heroSize / 2;
            heroY = canvas.height / 2 - heroSize / 2;

            enemies = [];
            for (let i = 0; i < 8; i++) {
                enemies.push(createRandomSquare());
            }

            coins = [];
            for (let i = 0; i < 10; i++) {
                coins.push(createRandomCoin());
            }

            winSquare = createRandomSquare();
            score = 0;

            update();
        }

        restartButton.addEventListener('click', restartGame);

        function update() {
            checkCollision();

            enemies.forEach(enemy => {
                enemy.x += Math.random() * 4 - 2;
                enemy.y += Math.random() * 4 - 2;

                if (enemy.x < 0) enemy.x = 0;
                if (enemy.y < 0) enemy.y = 0;
                if (enemy.x > canvas.width - enemySize) enemy.x = canvas.width - enemySize;
                if (enemy.y > canvas.height - enemySize) enemy.y = canvas.height - enemySize;
            });

            draw();
            requestAnimationFrame(update);
        }

        function handleKeyPress(e) {
            const speed = 5;
            switch (e.key) {
                case 'ArrowUp':
                    heroY -= speed;
                    break;
                case 'ArrowDown':
                    heroY += speed;
                    break;
                case 'ArrowLeft':
                    heroX -= speed;
                    break;
                case 'ArrowRight':
                    heroX += speed;
                    break;
            }

            if (heroX < 0) heroX = 0;
            if (heroY < 0) heroY = 0;
            if (heroX > canvas.width - heroSize) heroX = canvas.width - heroSize;
            if (heroY > canvas.height - heroSize) heroY = canvas.height - heroSize;
        }

        window.addEventListener('keydown', handleKeyPress);

        for (let i = 0; i < 8; i++) {
            enemies.push(createRandomSquare());
        }

        for (let i = 0; i < 10; i++) {
            coins.push(createRandomCoin());
        }

        update();
    </script>
</body>
</html>
